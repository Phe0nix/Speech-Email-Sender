!function(){var e=document.querySelector(".speech"),n=document.querySelector(".start"),t=document.querySelector(".stop"),o=document.querySelector(".main"),r=document.querySelector(".statusBar"),i=document.querySelector(".email"),c=document.querySelector(".instructionBtn"),s=document.querySelector(".instructionClose"),l=document.querySelector(".smallText"),a=document.querySelectorAll(".markText"),d=document.querySelector(".clear"),u=document.querySelector(".notSupport");window.SpeechRecognition||window.webkitSpeechRecognition?(window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,u.classList.add("hide")):u.classList.add("show");var m=new SpeechRecognition;m.interimResults=!0,m.onresult=(e=>{if(e.results[0].isFinal){var n=document.createElement("span"),t=document.createElement("p");n.innerHTML=t.innerHTML=e.results[0][0].transcript,n.innerHTML.includes("open alert")&&alert("alert box open!"),n.innerHTML.includes("line break")&&(n.innerHTML="<p></p>",console.log(n.innerHTML)),n.innerHTML.includes("paragraph break")&&(n.innerHTML="<br>",console.log(n.innerHTML)),n.innerHTML.includes("full stop")&&(n.innerHTML=n.innerHTML.replace(/(full stop)/g,". ")),n.innerHTML.includes("comma")&&(n.innerHTML=", "),n.innerHTML.includes("exclamation sign")&&(n.innerHTML=n.innerHTML.replace(/(exclamation sign)/g,"! ")),["green","purple","yellow","white","tomato","tan","thistle","wheat","lime"].map(e=>{n.innerHTML.toLowerCase().trim()===e?document.body.style.background=e:console.log("no match!")});var r=()=>{if(""===o.innerText)alert("No text is there for sending email!\nPlease click 'Start' button to speak.\nYou're great. You can do it. Just Yell !");else{var e,n,t,r,i,c=Array.from(document.querySelectorAll(".main span"));c.map((o,s)=>{"<p></p>"===o.innerHTML&&(t=s),e=c.slice(0,t),n=c.slice(t+1,c.length),r=e.map(e=>e.innerHTML),i=n.map(e=>e.innerHTML)}),window.open("mailto:name@domain.com?subject="+r.join(" ")+"&body="+i.join(" ").replace(/(<br>)/g,"%0D"),"_self")}};if(i.onclick=r,t.innerHTML.includes("delete now")){var c=Array.from(document.querySelectorAll(".main span"));c.splice(this.length-1,2);o.innerHTML="",c.map(e=>{""===e.innerHTML?console.log(e):o.appendChild(e)})}else t.innerHTML.includes("send email")?r():o.appendChild(n)}}),m.onend=(()=>{t.classList.contains("speechEnd")?m.stop():m.start()}),m.onnomatch=(()=>{console.log("Not Match!! Louder")}),n.onclick=(()=>{m.start(),e.innerHTML="",n.classList.add("disable"),n.tabIndex="-1",t.classList.remove("speechEnd")}),t.onclick=(()=>{m.stop(),e.innerHTML="( Click start button & talk )",n.classList.remove("disable"),n.tabIndex="0",t.classList.add("speechEnd")}),d.onclick=(()=>o.innerHTML=""),m.onspeechstart=(()=>{console.log("speech start"),r.classList.add("statusActive")}),m.onspeechend=(()=>{console.log("speech start"),r.classList.remove("statusActive")}),m.onaudiostart=(()=>{console.log("audio start")}),l.onmouseover=(()=>{Array.from(a).map(e=>e.style.outline="2px solid red")}),l.onmouseout=(()=>{Array.from(a).map(e=>e.style.outline="0")}),c.onclick=(()=>{document.querySelector(".instructionContainer").classList.add("show"),document.querySelector(".instructionContainer").classList.remove("hide"),s.tabIndex=0}),s.onclick=(()=>{document.querySelector(".instructionContainer").classList.add("hide"),document.querySelector(".instructionContainer").classList.remove("show"),s.tabIndex=-1})}();
