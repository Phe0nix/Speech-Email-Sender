(function(){window.SpeechRecognition||window.webkitSpeechRecognition?window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition:console.log('Speech Recognition not support');var a=document.querySelector('.speech'),b=document.querySelector('.start'),c=document.querySelector('.stop'),h=document.querySelector('.main'),j=document.querySelector('.statusBar'),k=document.querySelector('.email'),l=document.querySelector('.instructionBtn'),m=document.querySelector('.instructionClose'),n=document.querySelector('.smallText'),o=document.querySelectorAll('.markText'),p=document.querySelector('.clear'),q=new SpeechRecognition;q.interimResults=!0,q.onresult=r=>{if(r.results[0].isFinal){var t=document.createElement('span'),u=document.createElement('p');t.innerHTML=u.innerHTML=r.results[0][0].transcript,t.innerHTML.includes('open alert')&&alert('alert box open!'),t.innerHTML.includes('line break')&&(t.innerHTML='<p></p>',console.log(t.innerHTML)),t.innerHTML.includes('paragraph break')&&(t.innerHTML='<br>',console.log(t.innerHTML)),t.innerHTML.includes('full stop')&&(t.innerHTML=t.innerHTML.replace(/(full stop)/g,'. ')),t.innerHTML.includes('comma')&&(t.innerHTML=', '),t.innerHTML.includes('exclamation sign')&&(t.innerHTML=t.innerHTML.replace(/(exclamation sign)/g,'! ')),['green','purple','yellow','white','tomato','tan','thistle','wheat','lime'].map(y=>{var z=t.innerHTML;z.toLowerCase().trim()===y?document.body.style.background=y:console.log('no match!')});var v=()=>{if(''===h.innerText)alert('No text is there for sending email!\nPlease click \'Start\' button to speak.\nYou\'re great. You can do it. Just Yell !');else{var z,A,B,C,D,y=Array.from(document.querySelectorAll('.main span'));y.map((E,F)=>{'<p></p>'===E.innerHTML&&(B=F),z=y.slice(0,B),A=y.slice(B+1,y.length),C=z.map(G=>G.innerHTML),D=A.map(G=>G.innerHTML)}),window.open('mailto:name@domain.com?subject='+C.join(' ')+'&body='+D.join(' ').replace(/(<br>)/g,'%0D'),'_self')}};if(k.onclick=v,u.innerHTML.includes('delete now')){var w=Array.from(document.querySelectorAll('.main span')),x=w.splice(this.length-1,2);h.innerHTML='',w.map(y=>{''===y.innerHTML?console.log(y):h.appendChild(y)})}else u.innerHTML.includes('send email')?v():h.appendChild(t)}},q.onend=()=>{c.classList.contains('speechEnd')?q.stop():q.start()},q.onnomatch=()=>{console.log('Not Match!! Louder')},b.onclick=()=>{q.start(),a.innerHTML='',b.classList.add('disable'),b.tabIndex='-1',c.classList.remove('speechEnd')},c.onclick=()=>{q.stop(),a.innerHTML='( Click start button & talk )',b.classList.remove('disable'),b.tabIndex='0',c.classList.add('speechEnd')},p.onclick=()=>h.innerHTML='',q.onspeechstart=()=>{console.log('speech start'),j.classList.add('statusActive')},q.onspeechend=()=>{console.log('speech start'),j.classList.remove('statusActive')},q.onaudiostart=()=>{console.log('audio start')},n.onmouseover=()=>{Array.from(o).map(r=>r.style.outline='2px solid red')},n.onmouseout=()=>{Array.from(o).map(r=>r.style.outline='0')},l.onclick=()=>{document.querySelector('.instructionContainer').classList.add('show'),document.querySelector('.instructionContainer').classList.remove('hide'),m.tabIndex=0},m.onclick=()=>{document.querySelector('.instructionContainer').classList.add('hide'),document.querySelector('.instructionContainer').classList.remove('show'),m.tabIndex=-1}})();
